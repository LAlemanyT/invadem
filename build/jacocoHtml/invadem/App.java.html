<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>App.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Scaffold</a> &gt; <a href="index.source.html" class="el_package">invadem</a> &gt; <span class="el_source">App.java</span></div><h1>App.java</h1><pre class="source lang-java linenums">package invadem;

import processing.core.PApplet;
import processing.core.PImage;
import processing.core.PFont;
import java.util.List;
import java.util.ArrayList;
import java.util.Random;





//NO JAVAFX, AWT OR JOGL
public class App extends PApplet {
    
    
    int frameCounter;
    PFont font;
    int hi;
    int score;
    int p2score;
    int extraLifeCheck;
    int p2ExtraLife;
    int extraLifeRequirement;
    
    
    Tank tank;
    PImage tankImg;
    //boolean right = false;
    //boolean left = false;
    
    Tank player2;
    PImage player2Img;
    boolean right2;
    boolean left2;
    
    List&lt;BarrierSegment&gt; barrL; //X: 200 Y:height-75
    List&lt;BarrierSegment&gt; barrM; //X: width/2 Y: height - 75
    List&lt;BarrierSegment&gt; barrR; //X: 430 Y: height-75
    
    List&lt;PImage&gt; barrTop;
    List&lt;PImage&gt; barrLeft;
    List&lt;PImage&gt; barrRight;
    List&lt;PImage&gt; barrSolid;
    int barrierTop;
    
    List&lt;PImage&gt; normInvade;
    List&lt;PImage&gt; powerInvade;
    List&lt;PImage&gt; armorInvade;
    int invStartx;
    int invStarty; 
    
    List&lt;List&lt;SuperInvader&gt;&gt; invaders;
    
    List&lt;Projectile&gt; bullets;
    List&lt;Projectile&gt; p2Bullets;
    //boolean canShoot;
    PImage projImg;
    
    int gameState; // 0= NORMAL GAME; 1=INVADER WIN; 2=PLAYER WIN
    int level;
    int timeToShoot;
    
    boolean player2In;
    
<span class="fc" id="L67">    public App() {</span>
        //Set up your objects
<span class="fc" id="L69">        bullets = new ArrayList&lt;Projectile&gt;();</span>
<span class="fc" id="L70">        p2Bullets = new ArrayList&lt;Projectile&gt;();</span>
<span class="fc" id="L71">        barrTop = new ArrayList&lt;PImage&gt;();</span>
<span class="fc" id="L72">        barrL = new ArrayList&lt;BarrierSegment&gt;();</span>
<span class="fc" id="L73">        barrM = new ArrayList&lt;BarrierSegment&gt;();</span>
<span class="fc" id="L74">        barrR = new ArrayList&lt;BarrierSegment&gt;();</span>
<span class="fc" id="L75">        invaders = new ArrayList&lt;List&lt;SuperInvader&gt;&gt;();</span>
<span class="fc" id="L76">    }</span>

    public void setup() {
<span class="nc" id="L79">        frameRate(60);</span>
<span class="nc" id="L80">        background(0,0,0);</span>
<span class="nc" id="L81">        frame.setTitle(&quot;Invadem&quot;);</span>
        
        
<span class="nc" id="L84">        player2In=false;</span>
<span class="nc" id="L85">        level =0;</span>
<span class="nc" id="L86">        extraLifeCheck = 0;</span>
<span class="nc" id="L87">        p2ExtraLife = 0;</span>
<span class="nc" id="L88">        extraLifeRequirement = 20000;</span>
<span class="nc" id="L89">        timeToShoot =300;</span>
<span class="nc" id="L90">        font = createFont(&quot;PressStart2P-Regular.ttf&quot;, 64);</span>
<span class="nc" id="L91">        hi = 10000;</span>
<span class="nc" id="L92">        score = 0;</span>
<span class="nc" id="L93">        p2score = 0;</span>
<span class="nc" id="L94">        tankImg=loadImage(&quot;tank1.png&quot;);</span>
<span class="nc" id="L95">        gameState= -1;</span>
<span class="nc" id="L96">        player2Img=loadImage(&quot;tank_purple.png&quot;);</span>
<span class="nc" id="L97">        tank = new Tank(tankImg, width/2, height-50, 22, 16);</span>
<span class="nc" id="L98">        player2 = new Tank(player2Img, width/2, height-50, 22, 16);</span>
        //MAKE OBJECTS
<span class="nc" id="L100">        Reset();</span>
        
        
<span class="nc" id="L103">    }</span>

    public void settings() {
<span class="nc" id="L106">        size(640, 480);</span>
        
        
        
<span class="nc" id="L110">    }</span>

    public void draw() { 
        //Main Game Loop
<span class="nc" id="L114">        background(0,0,0);</span>
        //MENU
<span class="nc bnc" id="L116" title="All 2 branches missed.">        if(gameState == -1){</span>
<span class="nc" id="L117">            textFont(font);</span>
<span class="nc" id="L118">            textSize(16);</span>
<span class="nc" id="L119">            text(&quot;INVADEM&quot;, (this.width)/2-56, (this.height/2)- 8);</span>
<span class="nc" id="L120">            text(&quot;PRESS ENTER TO PLAY&quot;, (this.width/2)-135, (this.height/2)+35);</span>
        }
        
        
        //NORMAL GAME BEGINS
<span class="nc bnc" id="L125" title="All 2 branches missed.">        if(gameState == 0){</span>
            
            
<span class="nc bnc" id="L128" title="All 2 branches missed.">            if(extraLifeCheck &gt;= extraLifeRequirement){</span>
<span class="nc" id="L129">                tank.extraLife();</span>
<span class="nc" id="L130">                extraLifeCheck -= extraLifeRequirement;</span>
            }
            
<span class="nc bnc" id="L133" title="All 4 branches missed.">            if(player2In &amp;&amp; p2ExtraLife &gt;= extraLifeRequirement){</span>
<span class="nc" id="L134">                player2.extraLife();</span>
<span class="nc" id="L135">                p2ExtraLife -= extraLifeRequirement;</span>
            }
            
           
<span class="nc" id="L139">            frameCounter++;</span>
<span class="nc" id="L140">            printImages();</span>
            
            //INVADERS GET SHOT
<span class="nc" id="L143">            InvaderShot();</span>
            
            //PLAYER GETS SHOT
<span class="nc" id="L146">            PlayerShot(tank, bullets);</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">            if(player2In){</span>
<span class="nc" id="L148">                PlayerShot(player2, bullets);</span>
            }
            
        
<span class="nc" id="L152">            this.barrColl(barrL, bullets);</span>
<span class="nc" id="L153">            this.barrColl(barrR, bullets);</span>
<span class="nc" id="L154">            this.barrColl(barrM, bullets);</span>
            
<span class="nc" id="L156">            this.barrColl(barrL, p2Bullets);</span>
<span class="nc" id="L157">            this.barrColl(barrR, p2Bullets);</span>
<span class="nc" id="L158">            this.barrColl(barrM, p2Bullets);</span>
        
<span class="nc bnc" id="L160" title="All 2 branches missed.">            if(tank.getRight()){</span>
<span class="nc" id="L161">                tank.move('r');</span>
            }
<span class="nc bnc" id="L163" title="All 2 branches missed.">            if(tank.getLeft()){</span>
<span class="nc" id="L164">                tank.move('l');</span>
            }
            
<span class="nc bnc" id="L167" title="All 2 branches missed.">            if(player2.getRight()){</span>
<span class="nc" id="L168">                player2.move('r');</span>
            }
<span class="nc bnc" id="L170" title="All 2 branches missed.">            if(player2.getLeft()){</span>
<span class="nc" id="L171">                player2.move('l');</span>
            }
            
            
         
            //BULLETS OUT OF SCREEN
<span class="nc" id="L177">            bulletsOut(bullets);</span>
<span class="nc" id="L178">            bulletsOut(p2Bullets);</span>
            
            
        
<span class="nc bnc" id="L182" title="All 2 branches missed.">            if(frameCounter % timeToShoot == 0){</span>
            
<span class="nc" id="L184">                RandomInvaderShoot();</span>
            }
            
<span class="nc bnc" id="L187" title="All 2 branches missed.">            if(!player2In){</span>
<span class="nc bnc" id="L188" title="All 2 branches missed.">                if(tank.getHealth() &lt;= 0){</span>
<span class="nc" id="L189">                    gameState = 1;</span>
<span class="nc" id="L190">                    frameCounter =0;</span>
                }
            }
            
<span class="nc bnc" id="L194" title="All 2 branches missed.">            if(player2In){</span>
<span class="nc bnc" id="L195" title="All 4 branches missed.">                if(tank.getHealth() &lt;=0 &amp;&amp; player2.getHealth()&lt;=0){</span>
<span class="nc" id="L196">                    gameState = 1;</span>
<span class="nc" id="L197">                    frameCounter = 0;</span>
                }
            }
<span class="nc bnc" id="L200" title="All 2 branches missed.">            if(InvaderEmpty(invaders)){</span>
<span class="nc" id="L201">                gameState=2;</span>
<span class="nc" id="L202">                frameCounter =0;</span>
            }
            
            winCheck:
<span class="nc bnc" id="L206" title="All 2 branches missed.">            for(List&lt;SuperInvader&gt; i : invaders){</span>
<span class="nc bnc" id="L207" title="All 2 branches missed.">                for(SuperInvader j: i){</span>
<span class="nc bnc" id="L208" title="All 2 branches missed.">                    if(j.invaderWin()){</span>
<span class="nc" id="L209">                        gameState = 1;</span>
<span class="nc" id="L210">                        frameCounter = 0;</span>
<span class="nc" id="L211">                        break winCheck;</span>
                    }
<span class="nc" id="L213">                }</span>
<span class="nc" id="L214">            }</span>
        }//NORMAL GAME ENDS
        
<span class="nc bnc" id="L217" title="All 4 branches missed.">        if(gameState == 1 || gameState==2){ //1: GAME OVER, 2: NXT LVL</span>
<span class="nc" id="L218">            frameCounter++;</span>
            
            //background(0,0,0);
<span class="nc bnc" id="L221" title="All 2 branches missed.">            if(gameState==1){</span>
<span class="nc bnc" id="L222" title="All 2 branches missed.">                if(!player2In){</span>
<span class="nc" id="L223">                    this.image(loadImage(&quot;gameover.png&quot;), (this.width/2)-56, (this.height/2)-8, 112, 16);</span>
                }
<span class="nc bnc" id="L225" title="All 2 branches missed.">                if(player2In){</span>
<span class="nc bnc" id="L226" title="All 2 branches missed.">                    if(score &gt; p2score){</span>
<span class="nc" id="L227">                        text(&quot;PLAYER 1 WINS!&quot;, (this.width/2)-90, (this.height/2)-8);</span>
                    }
<span class="nc bnc" id="L229" title="All 2 branches missed.">                    if(p2score &gt; score){</span>
<span class="nc" id="L230">                        text(&quot;PLAYER 2 WINS!&quot;, (this.width/2)-90, (this.height/2)-8);</span>
                    }
<span class="nc bnc" id="L232" title="All 2 branches missed.">                    if(p2score == score){</span>
<span class="nc" id="L233">                        text(&quot;TIED GAME&quot;, (this.width/2)-56, (this.height/2)-8);</span>
                    }
                }
                
            }
            else{
<span class="nc" id="L239">                this.image(loadImage(&quot;nextLevel.png&quot;), (this.width/2)-56, (this.height/2)-8, 112,16);</span>
            }
            
<span class="nc bnc" id="L242" title="All 2 branches missed.">            if(frameCounter == 120){</span>
<span class="nc bnc" id="L243" title="All 2 branches missed.">                if(gameState == 2){</span>
<span class="nc" id="L244">                    level++;</span>
<span class="nc" id="L245">                    gameState=0;</span>
                }
<span class="nc bnc" id="L247" title="All 2 branches missed.">                if(gameState == 1){</span>
<span class="nc bnc" id="L248" title="All 2 branches missed.">                    if(score&gt;hi){</span>
<span class="nc" id="L249">                        hi = score;</span>
                    }
<span class="nc bnc" id="L251" title="All 2 branches missed.">                    if(p2score&gt;hi){</span>
<span class="nc" id="L252">                        hi = p2score;</span>
                    }
                    
<span class="nc" id="L255">                    gameState = -1;</span>
<span class="nc" id="L256">                    score = 0;</span>
<span class="nc" id="L257">                    p2score =0;</span>
<span class="nc" id="L258">                    extraLifeCheck = 0;</span>
<span class="nc" id="L259">                    p2ExtraLife =0;</span>
<span class="nc" id="L260">                    level =0;</span>
<span class="nc" id="L261">                    tank = new Tank(tankImg, width/2, height-50, 22, 16);</span>
<span class="nc" id="L262">                    player2 = new Tank(player2Img, width/2, height-50, 22, 16);</span>
                }
<span class="nc" id="L264">                ResetLists();</span>
<span class="nc" id="L265">                Reset();</span>
            }
        }
<span class="nc" id="L268">    }</span>
    
    public void ResetLists(){
<span class="fc" id="L271">        bullets = new ArrayList&lt;Projectile&gt;();</span>
<span class="fc" id="L272">        p2Bullets = new ArrayList&lt;Projectile&gt;();</span>
<span class="fc" id="L273">        barrTop = new ArrayList&lt;PImage&gt;();</span>
<span class="fc" id="L274">        barrL = new ArrayList&lt;BarrierSegment&gt;();</span>
<span class="fc" id="L275">        barrM = new ArrayList&lt;BarrierSegment&gt;();</span>
<span class="fc" id="L276">        barrR = new ArrayList&lt;BarrierSegment&gt;();</span>
<span class="fc" id="L277">        invaders = new ArrayList&lt;List&lt;SuperInvader&gt;&gt;();</span>
        //gameState =0;
<span class="fc" id="L279">    }</span>
    
    public void Reset(){
        
<span class="nc" id="L283">        timeToShoot -= (level*60);</span>
<span class="nc bnc" id="L284" title="All 2 branches missed.">        if(timeToShoot &lt; 60){</span>
<span class="nc" id="L285">            timeToShoot = 60;</span>
        }
        
<span class="nc" id="L288">        frameCounter = 0;</span>
        //gameState =0;
        
        
        
<span class="nc" id="L293">        barrTop=new ArrayList&lt;PImage&gt;();</span>
<span class="nc" id="L294">        barrTop.add(loadImage(&quot;barrier_top1.png&quot;));</span>
<span class="nc" id="L295">        barrTop.add(loadImage(&quot;barrier_top2.png&quot;));</span>
<span class="nc" id="L296">        barrTop.add(loadImage(&quot;barrier_top3.png&quot;));</span>
        
<span class="nc" id="L298">        barrLeft=new ArrayList&lt;PImage&gt;();</span>
<span class="nc" id="L299">        barrLeft.add(loadImage(&quot;barrier_left1.png&quot;));</span>
<span class="nc" id="L300">        barrLeft.add(loadImage(&quot;barrier_left2.png&quot;));</span>
<span class="nc" id="L301">        barrLeft.add(loadImage(&quot;barrier_left3.png&quot;));</span>
        
<span class="nc" id="L303">        barrRight = new ArrayList&lt;PImage&gt;();</span>
<span class="nc" id="L304">        barrRight.add(loadImage(&quot;barrier_right1.png&quot;));</span>
<span class="nc" id="L305">        barrRight.add(loadImage(&quot;barrier_right2.png&quot;));</span>
<span class="nc" id="L306">        barrRight.add(loadImage(&quot;barrier_right3.png&quot;));</span>
        
<span class="nc" id="L308">        barrSolid = new ArrayList&lt;PImage&gt;();</span>
<span class="nc" id="L309">        barrSolid.add(loadImage(&quot;barrier_solid1.png&quot;));</span>
<span class="nc" id="L310">        barrSolid.add(loadImage(&quot;barrier_solid2.png&quot;));</span>
<span class="nc" id="L311">        barrSolid.add(loadImage(&quot;barrier_solid3.png&quot;));</span>
        
<span class="nc" id="L313">        barrierTop = height-85;</span>
<span class="nc" id="L314">        int barrLSource = 200;</span>
<span class="nc" id="L315">        int barrMSource = (width/2);</span>
<span class="nc" id="L316">        int barrRSource = 430;</span>
        
<span class="nc" id="L318">        barrL = makeBarrier(barrLSource, barrL);</span>
<span class="nc" id="L319">        barrM = makeBarrier(barrMSource, barrM);</span>
<span class="nc" id="L320">        barrR = makeBarrier(barrRSource, barrR);</span>
       
        
<span class="nc" id="L323">        normInvade = new ArrayList&lt;PImage&gt;();</span>
<span class="nc" id="L324">        normInvade.add(loadImage(&quot;invader1.png&quot;));</span>
<span class="nc" id="L325">        normInvade.add(loadImage(&quot;invader2.png&quot;));</span>
        
<span class="nc" id="L327">        powerInvade = new ArrayList&lt;PImage&gt;();</span>
<span class="nc" id="L328">        powerInvade.add(loadImage(&quot;invader1_power.png&quot;));</span>
<span class="nc" id="L329">        powerInvade.add(loadImage(&quot;invader2_power.png&quot;));</span>
        
<span class="nc" id="L331">        armorInvade = new ArrayList&lt;PImage&gt;();</span>
<span class="nc" id="L332">        armorInvade.add(loadImage(&quot;invader1_armoured.png&quot;));</span>
<span class="nc" id="L333">        armorInvade.add(loadImage(&quot;invader2_armoured.png&quot;));</span>
        
<span class="nc" id="L335">        invStartx=210;</span>
<span class="nc" id="L336">        invStarty = 46;</span>
        
        //for(int i=0; i&lt;4; i++){
        //    invaders.add(new ArrayList&lt;SuperInvader&gt;());
        //}
<span class="nc bnc" id="L341" title="All 2 branches missed.">        for(int i =0; i&lt;4; i++){</span>
<span class="nc" id="L342">            invaders.add(new ArrayList&lt;SuperInvader&gt;());</span>
<span class="nc bnc" id="L343" title="All 2 branches missed.">            for(int j=0; j&lt;10 ; j++){</span>
<span class="nc bnc" id="L344" title="All 2 branches missed.">                if(i == 0){</span>
<span class="nc" id="L345">                    invaders.get(i).add(new ArmorInvader(armorInvade, barrierTop-26, invStartx + (j*32), invStarty+(i*32), 16, 16));</span>
                }
<span class="nc bnc" id="L347" title="All 2 branches missed.">                if(i == 1){</span>
<span class="nc" id="L348">                    invaders.get(i).add(new PowerInvader(powerInvade, barrierTop-26, invStartx + (j*32), invStarty+(i*32), 16, 16));</span>
                }
<span class="nc bnc" id="L350" title="All 2 branches missed.">                if(i&gt;1){</span>
<span class="nc" id="L351">                    invaders.get(i).add(new Invader(normInvade, barrierTop-26, invStartx +(j*32), invStarty+(i*32), 16, 16));</span>
                }
            }
        }
        
<span class="nc" id="L356">        tank.setShoot(true);</span>
<span class="nc" id="L357">        player2.setShoot(true);</span>
<span class="nc" id="L358">        projImg = loadImage(&quot;projectile.png&quot;);</span>
<span class="nc" id="L359">    }</span>
    
    public boolean PlayerShot(Tank player, List&lt;Projectile&gt; proj){
<span class="fc" id="L362">        boolean ans = false;</span>
<span class="fc bfc" id="L363" title="All 2 branches covered.">        other: for(int i =0; i&lt;proj.size(); i++){</span>
<span class="fc bfc" id="L364" title="All 2 branches covered.">                if(!proj.get(i).isPlayer()){</span>
<span class="fc" id="L365">                    boolean destroy = player.checkCollision(proj.get(i));</span>
<span class="fc bfc" id="L366" title="All 2 branches covered.">                    if(destroy){</span>
<span class="fc" id="L367">                        ans= true;</span>
<span class="fc" id="L368">                        player.isHit(proj.get(i).getDMG());</span>
<span class="fc" id="L369">                        proj.remove(i);</span>
<span class="fc" id="L370">                        i--; </span>
<span class="fc" id="L371">                        continue other;</span>
                    }
              
                    }
                }
<span class="fc" id="L376">        return ans;</span>
    }
    
    
    
    public boolean InvaderEmpty(List&lt;List&lt;SuperInvader&gt;&gt; aliens){
        
<span class="fc bfc" id="L383" title="All 2 branches covered.">        for(int i =0; i&lt;aliens.size(); i++){</span>
<span class="pc bpc" id="L384" title="1 of 2 branches missed.">            if(aliens.get(i).isEmpty()){</span>
<span class="nc" id="L385">                aliens.remove(i);</span>
<span class="nc" id="L386">                i--;</span>
            }
        }
<span class="pc bpc" id="L389" title="1 of 2 branches missed.">        if(aliens.isEmpty()){</span>
<span class="nc" id="L390">            return true;</span>
        }
<span class="fc" id="L392">        return false;</span>
    }
    
   
    
    public void InvaderShot(){
<span class="fc bfc" id="L398" title="All 2 branches covered.">        for(int i = 0; i&lt; invaders.size(); i++){</span>
<span class="fc bfc" id="L399" title="All 2 branches covered.">            inv: for(int j =0; j&lt;invaders.get(i).size();j++){</span>
                
                //bullets
<span class="fc bfc" id="L402" title="All 2 branches covered.">                for(int k =0; k&lt;bullets.size(); k++){</span>
<span class="fc bfc" id="L403" title="All 2 branches covered.">                    if(bullets.get(k).isPlayer()){</span>
<span class="fc" id="L404">                        boolean destroy = invaders.get(i).get(j).checkCollision(bullets.get(k));</span>
<span class="fc bfc" id="L405" title="All 2 branches covered.">                        if(destroy){</span>
<span class="fc" id="L406">                            invaders.get(i).get(j).hit();</span>
<span class="pc bpc" id="L407" title="1 of 2 branches missed.">                            if(invaders.get(i).get(j).getHealth() == 0){</span>
<span class="fc" id="L408">                                score += invaders.get(i).get(j).getScore();</span>
<span class="fc" id="L409">                                extraLifeCheck += invaders.get(i).get(j).getScore();</span>
<span class="fc" id="L410">                                invaders.get(i).remove(j);</span>
                            }
<span class="fc" id="L412">                            bullets.remove(k);</span>
<span class="fc" id="L413">                            j--;</span>
<span class="fc" id="L414">                            continue inv;</span>
                        }
                    }
                    
                }
                    
                //Player2 bullets
<span class="fc bfc" id="L421" title="All 2 branches covered.">                if(player2In){</span>
<span class="pc bpc" id="L422" title="1 of 2 branches missed.">                    for(int k =0; k&lt;p2Bullets.size(); k++){</span>
<span class="pc bpc" id="L423" title="1 of 2 branches missed.">                        if(p2Bullets.get(k).isPlayer()){</span>
<span class="fc" id="L424">                            boolean destroy = invaders.get(i).get(j).checkCollision(p2Bullets.get(k));</span>
<span class="pc bpc" id="L425" title="1 of 2 branches missed.">                            if(destroy){</span>
<span class="fc" id="L426">                                invaders.get(i).get(j).hit();</span>
<span class="pc bpc" id="L427" title="1 of 2 branches missed.">                                if(invaders.get(i).get(j).getHealth() == 0){</span>
<span class="fc" id="L428">                                    p2score += invaders.get(i).get(j).getScore();</span>
<span class="fc" id="L429">                                    p2ExtraLife += invaders.get(i).get(j).getScore();</span>
<span class="fc" id="L430">                                    invaders.get(i).remove(j);</span>
                                }
<span class="fc" id="L432">                                p2Bullets.remove(k);</span>
<span class="fc" id="L433">                                j--;</span>
<span class="fc" id="L434">                                continue inv;</span>
                            }
                        }
                    
                    }
                }
            }
        }
    
<span class="fc" id="L443">    }</span>
    
    
    public void RandomInvaderShoot(){
<span class="fc bfc" id="L447" title="All 2 branches covered.">        for(int i =0; i&lt;invaders.size(); i++){</span>
<span class="pc bpc" id="L448" title="1 of 2 branches missed.">            if(invaders.get(i).isEmpty()){</span>
<span class="nc" id="L449">                invaders.remove(i);</span>
<span class="nc" id="L450">                i--;</span>
            }
        }
            
<span class="fc bfc" id="L454" title="All 2 branches covered.">        if(!invaders.isEmpty()){</span>
<span class="fc" id="L455">            Random rand = new Random();</span>
<span class="fc" id="L456">            Random rand2 = new Random();</span>
            
<span class="fc" id="L458">            int temp = rand.nextInt(invaders.size());</span>
<span class="fc" id="L459">            int temp2 = rand2.nextInt(invaders.get(temp).size());</span>
                    
<span class="fc" id="L461">            bullets = invaders.get(temp).get(temp2).Shoot(bullets, projImg);</span>
                    
                    //int x =  invaders.get(temp).get(temp2).getX();
                    //int y =  invaders.get(temp).get(temp2).getY();
            
                    //bullets.add(new Projectile(projImg, 1, false ,x+8, y,1,3));
        }
<span class="fc" id="L468">    }</span>
    
    public void keyPressed(){
    //KEYCODE: 37 = LEFT; 39 = RIGHT; 32 = SPACE; 9 = TAB; 16 = SHIFT; 65 =A; 68 = D; 87 =W
        
<span class="fc bfc" id="L473" title="All 2 branches covered.">        if(keyCode==37){</span>
            //left=true;
<span class="fc" id="L475">            tank.setLeft(true);</span>
        }
<span class="fc bfc" id="L477" title="All 2 branches covered.">        if(keyCode == 39){</span>
            //right=true;
<span class="fc" id="L479">            tank.setRight(true);</span>
        }
        
<span class="fc bfc" id="L482" title="All 2 branches covered.">        if(keyCode == 65){</span>
<span class="pc bpc" id="L483" title="1 of 2 branches missed.">            if(player2In){</span>
<span class="fc" id="L484">                player2.setLeft(true);</span>
            }
        }
        
<span class="fc bfc" id="L488" title="All 2 branches covered.">        if(keyCode == 68){</span>
<span class="pc bpc" id="L489" title="1 of 2 branches missed.">            if(player2In){</span>
<span class="fc" id="L490">                player2.setRight(true);</span>
            }
        }
        
<span class="pc bpc" id="L494" title="1 of 4 branches missed.">        if(keyCode == 10 &amp;&amp; gameState == -1){</span>
<span class="nc" id="L495">            gameState=0;</span>
        }
        
<span class="pc bpc" id="L498" title="2 of 6 branches missed.">        if(keyCode == 32 &amp;&amp; tank.canShoot() &amp;&amp; tank.getHealth()&gt;0){</span>
            //bull = new Projectile(loadImage(&quot;projectile.png&quot;), tank.getX(), tank.getY(), 3, 1);
<span class="fc" id="L500">            bullets=tank.shoot(bullets, projImg);</span>
            //bullets.add(new Projectile(loadImage(&quot;projectile.png&quot;), -1, 1, true, tank.getX()+11, tank.getY(), 1, 3));
            //canShoot = false;
<span class="fc" id="L503">            tank.setShoot(false);</span>
        }
        
<span class="pc bpc" id="L506" title="3 of 8 branches missed.">        if(keyCode == 87 &amp;&amp; player2.canShoot() &amp;&amp; player2In &amp;&amp; player2.getHealth()&gt;0){</span>
            //bull = new Projectile(loadImage(&quot;projectile.png&quot;), tank.getX(), tank.getY(), 3, 1);
<span class="fc" id="L508">            p2Bullets = player2.shoot(p2Bullets, projImg);</span>
            //bullets.add(new Projectile(loadImage(&quot;projectile.png&quot;), -1, 1, true, tank.getX()+11, tank.getY(), 1, 3));
            //canShoot = false;
<span class="fc" id="L511">            player2.setShoot(false);</span>
        }
        
<span class="fc bfc" id="L514" title="All 2 branches covered.">        if(keyCode == 9){</span>
<span class="fc bfc" id="L515" title="All 2 branches covered.">            player2In = !player2In;</span>
        }
<span class="fc" id="L517">    }</span>
     
    public void keyReleased(){
<span class="pc bpc" id="L520" title="1 of 2 branches missed.">        if(keyCode==37){</span>
            //left=false;
<span class="nc" id="L522">            tank.setLeft(false);</span>
        }
<span class="fc bfc" id="L524" title="All 2 branches covered.">        if(keyCode == 39){</span>
            //right=false;
<span class="fc" id="L526">            tank.setRight(false);</span>
        }
<span class="fc bfc" id="L528" title="All 2 branches covered.">        if(keyCode == 32){</span>
            //canShoot = true;
<span class="fc" id="L530">            tank.setShoot(true);</span>
        }
        
<span class="fc bfc" id="L533" title="All 2 branches covered.">        if(keyCode == 65){</span>
<span class="pc bpc" id="L534" title="1 of 2 branches missed.">            if(player2In){</span>
<span class="fc" id="L535">                player2.setLeft(false);</span>
            }
        }
        
<span class="fc bfc" id="L539" title="All 2 branches covered.">        if(keyCode == 68){</span>
<span class="pc bpc" id="L540" title="1 of 2 branches missed.">            if(player2In){</span>
<span class="fc" id="L541">                player2.setRight(false);</span>
            }
        }
        
<span class="fc bfc" id="L545" title="All 2 branches covered.">        if(keyCode == 87){</span>
            //canShoot = true;
<span class="fc" id="L547">            player2.setShoot(true);</span>
        }
<span class="fc" id="L549">    }</span>
    
    public List&lt;BarrierSegment&gt; makeBarrier(int source, List&lt;BarrierSegment&gt; barrier){
<span class="fc" id="L552">        barrier.add(new BarrierSegment(barrLeft, source, barrierTop, 8, 8));</span>
<span class="fc" id="L553">        barrier.add(new BarrierSegment(barrTop, source+8, barrierTop, 8, 8));</span>
<span class="fc" id="L554">        barrier.add(new BarrierSegment(barrRight, source+16, barrierTop, 8, 8));</span>
<span class="fc" id="L555">        barrier.add(new BarrierSegment(barrSolid, source, barrierTop+8, 8, 8));</span>
<span class="fc" id="L556">        barrier.add(new BarrierSegment(barrSolid, source, barrierTop+16, 8, 8));</span>
<span class="fc" id="L557">        barrier.add(new BarrierSegment(barrSolid, source+16, barrierTop+8, 8, 8));</span>
<span class="fc" id="L558">        barrier.add(new BarrierSegment(barrSolid, source+16, barrierTop+16, 8, 8));</span>
<span class="fc" id="L559">        return barrier;</span>
    }
    
    public boolean barrColl(List&lt;BarrierSegment&gt; barrier, List&lt;Projectile&gt; bulls){
<span class="fc" id="L563">        boolean reply = false;</span>
<span class="fc bfc" id="L564" title="All 2 branches covered.">        start: for(int i =0; i&lt;bulls.size(); i++){</span>
<span class="fc bfc" id="L565" title="All 2 branches covered.">            for(int j =0; j&lt;barrier.size(); j++){</span>
<span class="fc" id="L566">                boolean destroy = barrier.get(j).checkCollision(bulls.get(i));</span>
<span class="fc bfc" id="L567" title="All 2 branches covered.">                if(destroy){</span>
<span class="fc" id="L568">                    barrier.get(j).isHit(bulls.get(i).getDMG());</span>
<span class="fc" id="L569">                    bulls.remove(i);</span>
                    
<span class="pc bpc" id="L571" title="1 of 2 branches missed.">                    if(barrier.get(j).getHits() &gt;= 3){</span>
<span class="nc" id="L572">                        barrier.remove(j);</span>
                    }
<span class="fc" id="L574">                    i--;</span>
<span class="fc" id="L575">                    reply = true;</span>
<span class="fc" id="L576">                    continue start;</span>
                    
                }
            }
        }
<span class="fc" id="L581">        return reply;</span>
    }
    
    public void printImages(){
<span class="nc" id="L585">        textFont(font);</span>
<span class="nc" id="L586">        textSize(16);</span>
<span class="nc" id="L587">        text(&quot;HI &quot;+hi, 500, 25);</span>
<span class="nc" id="L588">        text(score, 15 , 25);</span>
<span class="nc" id="L589">        text(&quot;EXTRA LIFE AT 20,000&quot;, 150, 25);</span>
<span class="nc bnc" id="L590" title="All 2 branches missed.">        if(player2In){</span>
<span class="nc" id="L591">            text(p2score, 15 , 45);</span>
        }
<span class="nc bnc" id="L593" title="All 2 branches missed.">        if(tank.getHealth()&gt;0){</span>
<span class="nc" id="L594">                tank.draw(this);</span>
            }
            
            
<span class="nc bnc" id="L598" title="All 4 branches missed.">        if(player2In &amp;&amp; player2.getHealth()&gt;0){</span>
<span class="nc" id="L599">            player2.draw(this);</span>
                
<span class="nc bnc" id="L601" title="All 2 branches missed.">            for(int i=0; i&lt;player2.getHealth(); i++){</span>
<span class="nc" id="L602">                this.image(player2Img, (width-27)-(i*25), height-27, 22, 14);</span>
            }
        }
        
<span class="nc bnc" id="L606" title="All 2 branches missed.">        for(int i=0; i&lt;tank.getHealth(); i++){</span>
<span class="nc" id="L607">            this.image(tankImg, 5+(i*25), height-27, 22, 14);</span>
        }
            
            
            
<span class="nc bnc" id="L612" title="All 2 branches missed.">        for(BarrierSegment i : barrL){</span>
<span class="nc" id="L613">            i.draw(this);</span>
<span class="nc" id="L614">        }</span>
        
<span class="nc bnc" id="L616" title="All 2 branches missed.">        for(BarrierSegment i : barrM){</span>
<span class="nc" id="L617">            i.draw(this);</span>
<span class="nc" id="L618">        }</span>
        
<span class="nc bnc" id="L620" title="All 2 branches missed.">        for(BarrierSegment i : barrR){</span>
<span class="nc" id="L621">            i.draw(this);</span>
<span class="nc" id="L622">        }</span>
        
<span class="nc bnc" id="L624" title="All 2 branches missed.">        for(List&lt;SuperInvader&gt; i: invaders){</span>
<span class="nc bnc" id="L625" title="All 2 branches missed.">            for(SuperInvader j: i){</span>
<span class="nc" id="L626">                j.draw(this);</span>
<span class="nc" id="L627">            }</span>
<span class="nc" id="L628">        }</span>
        
<span class="nc bnc" id="L630" title="All 2 branches missed.">        for(Projectile i: bullets){</span>
<span class="nc" id="L631">            i.draw(this);</span>
<span class="nc" id="L632">        }</span>
<span class="nc bnc" id="L633" title="All 2 branches missed.">        if(player2In){</span>
<span class="nc bnc" id="L634" title="All 2 branches missed.">            for(Projectile i: p2Bullets){</span>
<span class="nc" id="L635">                i.draw(this);</span>
<span class="nc" id="L636">            }</span>
        }
<span class="nc" id="L638">    }</span>
    
    public void bulletsOut(List&lt;Projectile&gt; bulls){
<span class="fc bfc" id="L641" title="All 2 branches covered.">        for(int i =0; i&lt;bulls.size(); i++){</span>
<span class="pc bpc" id="L642" title="1 of 4 branches missed.">                if(bulls.get(i).getY()&lt;0 || bulls.get(i).getY()&gt;height){</span>
<span class="fc" id="L643">                    bulls.remove(i);</span>
<span class="fc" id="L644">                    i--;</span>
                    continue;
                }
            }
<span class="fc" id="L648">    }</span>

    public static void main(String[] args) {
<span class="nc" id="L651">        PApplet.main(&quot;invadem.App&quot;);</span>
<span class="nc" id="L652">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>